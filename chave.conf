### ### ### ### ### ### ### ### ### ### ### ### ### ### ###
### This config file is part of project CHAVE Simulator	###
### Available at: dscar.ga/chave                       	###
### ### ### ### ### ### ### ### ### ### ### ### ### ### ###
### Global configurations for CHAVE Project				###
### ### ### ### ### ### ### ### ### ### ### ### ### ### ###

# """ Date Hour Pattern for output and logs """
export CS_DP="%y.%m.%d-%H.%M.%S"
export CS_START=`date +${CS_DP}`

#Running on Environment (Only used on bash):
export CS_isAWS=true
export CS_isG5K=false
export CS_isLocal=false

# Directories
export CS_PROJ_ROOT=`pwd`
export CS_PY=${CS_PROJ_ROOT}"/venv36/bin/python"
export CS_SOURCE_FOLDER="input/traces/2-eucalyptus-traces"
export CS_FDR_EUCALYPTUS=${CS_PROJ_ROOT}/${CS_SOURCE_FOLDER}

# Type of traces: if "REAL" or "GENERATED"
export CS_TRACE_CLASS="REAL"

### ### ### ### ### ### ### ### ### ### ### ### ### ### ###
###     Architecture specifications                     ###
### ### ### ### ### ### ### ### ### ### ### ### ### ### ###

export CS_MAX_AZ_REGION="3"
export CS_CORE2RAM="4"  # This means 1core:4ram

# Use "FILE" or "AUTO" for generate 'az_id' patterns
export CS_DEFINE_AZID="FILE"
export CS_AZ_SELECTION="LB"  # 'HA' 'LB' 'RND'

export CS_ENABLE_EMON="False"
export CS_TRIGGER_MIGRATE="3600"

# Values is: 'TIGHT'-> 1 host, 'MEDIUM'-> 1.5 host or 'WIDE'-> 2 hosts
export CS_FRAGMENTATION_CLASS="TIGHT"

# Configurations for Overcommit
# export CS_HYPER_THREADING_PER_CORE="2"
export CS_VCPUS_PER_CORE="2.0"
export CS_DEDICATED_CPUS_FOR_MANAGEMENT="0.0"

### ### ### ### ### ### ### ### ### ### ### ### ### ### ###
####    Configuration to logger library			        ###
### ### ### ### ### ### ### ### ### ### ### ### ### ### ###

# """ Default log and output file name: """
export CS_DEF_FILE="{}_{}_{}_{}_{}_L{}_O{}_C{}_R{}\".format(\
sla.g_date(),args.alg[0],args.ff[0],args.wt[0],args.ca[0],args.lock[0],args.overcom[0],args.consol[0],args.repl[0])"

# """ Log path """
if [ "${USER}" == "debian" ]; then
    export CS_LOG_PATH="/home/debian/Dropbox/UDESC/Mestrado/Pratico/CHAVE-Sim/output/${CS_START}/logs"
    mount | grep /dev/vdb > /dev/null
    if [ $? -eq 1 ]; then
        sudo mount /dev/vdb /home/debian/Dropbox/UDESC/Mestrado/Pratico/CHAVE-Sim/output -o uid=debian
    fi
    mount | grep /dev/vdb > /dev/null
else
    export CS_LOG_PATH=${CS_PROJ_ROOT}"/output/${CS_START}/logs"
fi
export CS_LOG_OUTPUT="\"${CS_LOG_PATH}/${CS_DEF_FILE}+\"_log.txt\""

# """Log Formatter for Python Logger package"""
# Multithreads use: export CS_LOG_FORMATTER="%(levelname)-8s| %(threadName)-8s| %(module)-8s| %(funcName)-8s ] %(message)s"  ou ainda %(asctime)s.%(msecs)03d ## %(relativeCreated)d
# Serial:
export CS_LOG_FORMATTER="[%(levelname)-8s| %(module)-9s| %(funcName)-20s ] --> %(message)s"

# Log Level for specify the granularity of outputs in Python's Logger Package.
# It's accumulative, so 'CRITICAL' imply in less info and 'DEBUG' more info.
CRITICAL=50 # A serious error, indicating that the program itself may be unable to continue running.
ERROR=40    # Due to a more serious problem, the software has not been able to perform some function.
WARNING=30  # An indication that something unexpected happened, or indicative of some problem in the
			#   near future. The software is still working as expected.
INFO=20     # Confirmation that things are working as expected.
DEBUG=10    # Detailed information, typically of interest only when diagnosing problems.
NOTSET=0
export CS_LOG_LEVEL=${WARNING}

### ### ### ### ### ### ### ### ### ### ### ### ### ### ###
###     Output specifications                       	###
### ### ### ### ### ### ### ### ### ### ### ### ### ### ###

export CS_DATA_PATH=${CS_PROJ_ROOT}"/output/${CS_START}/results/"
export CS_DATA_OUTPUT="\"${CS_DATA_PATH}/${CS_DEF_FILE}"

# Choose the output format. Concatenate with '_' for multiples:
#   Metrics: CSV, JSON, SQLITE, TEXT, PICKLE
#   Memory usage: MEM
export CS_OUTPUT_TYPE="JSON_MEM"

# Separator for JSON is the breakline <None> or tab number [0, 1, ...]
export CS_OUTPUT_SEPARATOR="0"
### ### ### ### ### ### ### ### ### ### ### ### ### ### ###
###     THE END                                  	    ###
### ### ### ### ### ### ### ### ### ### ### ### ### ### ###

#OLD Config:
# """ Log path """
#if [ "${USER}" == "debian" ]; then
#    export CS_LOG_PATH="/media/debian/logs"
#    if [ ! -d "${CS_LOG_PATH}" ]; then
#        sudo udisksctl mount --block-device=/dev/vde
#    fi
#else
#    export CS_LOG_PATH=${CS_PROJ_ROOT}"/logs"
#fi
